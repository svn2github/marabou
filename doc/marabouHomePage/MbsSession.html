<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
    <META NAME="Generator" CONTENT="Cosmo Create 1.0.3">
</HEAD>
<BODY>
<H3>
Example of a MARaBOU session</H3>
<OL>
    <LI>
    Login (<B>xlogin</B>) at any Linux workstation, use your <B>group </B>account<BR>
     
    <UL>
        <LI>
        Copy files <B>~marabou/.rootrc </B>and <B>~marabou/rootalias.C </B>to 
        your home directory 
        <LI>
        Set working directory to <B>/o/exp/<I>mygroup </I></B>or deeper 
        <LI>
        Create/edit the config file <B><I>Xxx</I>Config.C</B>
         describing your experimental setup 
        <UL>
            <LI>
            file should start with <B>#!/usr/local/bin/xrcm</B> (makes 
            file self-executing) <BR>
             and should contain a statement like <B><I>xxx</I> = new 
            TMrbConfig(...)</B> 
            <LI>
            last commands should be 
            <UL>
                <LI>
                <B>MakeReadoutCode() </B>- to create MBS readout code 
                <LI>
                <B>MakeAnalyzeCode() </B>- to generate class defs &amp; 
                methods for ROOT 
            </UL>
            <LI>
            for details see example <A
             HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaConfig.C">ExampleConfig.C</A><BR>
             
        </UL>
        <LI>
        Compile config file using <B>root</B> 
        <UL>
            <LI>
            compile your config file: simply type <B><I>Xxx</I>Config.C</B>
             
            <LI>
            it will create <A HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/MbsSession_Config.gif">several files</A>
             in your working directory: 
            <UL>
                <LI>
                for MBS readout: 
                <UL>
                    <LI>
                    <A
                     HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaReadout.c"><B><I>Xxx</I>Readout.c</B></A><B>: </B>readout 
                    function 
                    <LI>
                    <A
                     HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaReadout.mk"><B><I>Xxx</I>Readout.mk</B></A><B>: </B>makefile 
                </UL>
                <LI>
                for monitoring &amp; analysis under ROOT: 
                <UL>
                    <LI>
                    <A
                     HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaAnalyze.h"><B><I>Xxx</I>Analyze.h</B></A>
                     and<B> <A
                     HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaAnalyze.cxx"><I>Xxx</I>Analyze.cxx</A>: </B>C++ 
                    class defs &amp; code 
                    <LI>
                    <A
                     HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaAnalyzeGlobals.h"><B><I>Xxx</I>AnalyzeGlobals.h</B></A>: 
                    user's global pointer defs<BR>
                     (pointers to histograms, windows, variables etc.) 
                    <LI>
                    <A
                     HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaAnalyzeFilter.C"><B><I>Xxx</I>AnalyzeFilter.C</B></A>: 
                    RootCint macro to set filter conditions interactively 
                    <LI>
                    <A
                     HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/examples/ExaAnalyze.mk"><B><I>Xxx</I>Analyze.mk</B></A><B>: </B>makefile 
                </UL>
            </UL>
        </UL>
        <LI>
        Compile your analysis code and link it to the common analysis client:<BR>
         execute<B> <A HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/MbsSession_Compile_Log.gif">make -f <I>Xxx</I>Analyze.mk 
        clean all</A> </B>- this will generate an executable file <B>M_analyze</B>
         
    </UL>
    <LI>
    Start analyze session 
    <UL>
        <LI>
        Start <A HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze.gif"><B>C_analyze</B></A><B> </B>in 
        one window (foreground, no &amp;!): <B>C_analyze</B> 
        <UL>
            <LI>
            Set input to <B>Tcpip</B> 
            <LI>
            Set name of PPC (Master) 
            <LI>
            Set type of TriggerModule (CAMAC or VME) 
            <LI>
            Set <B>Directory</B> to where your PPC files reside<BR>
             (i.e. path relative to /o/exp/<I>mygroup</I>). Directory 
            must already exist. <BR>

            <LI>
            Set <B>MBS Control -&gt; Gate length </B>properly (located 
            in the menu bar) <BR>
            <BR>
            <IMG SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_MenuBar.gif" BORDER="3"><BR>
            <BR>
            <IMG SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_Gate.gif" BORDER="3"><IMG
             SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_GateInput.gif" BORDER="3"><BR>
            <BR>

            <LI>
            Exec <B>MBS Control -&gt; Setup MBS files for LynxOs</B><BR>
            <BR>
            <IMG SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_SetupLynx.gif" BORDER="3"> (see <A
             HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_SetupLynx_Log.gif">terminal output</A>)<BR>
            <BR>

            <LI>
            To compile<B> <I>Xxx</I>Readout.c </B>exec<B> MBS Control 
            -&gt; Compile readout function</B><BR>
            (once only - or whenever hardware setup changes)<BR>
            <BR>
            <IMG SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_Compile.gif" BORDER="3"><IMG
             SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_Compile_Qu.gif" BORDER="3"> (see <A
             HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_Compile_Log.gif">terminal output</A>)<BR>
            <BR>

            <LI>
            Press <B>Configure</B> <BR>
            <BR>
            <IMG SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_Configure.gif" SGI_SRC_INVALID BORDER="3"><BR>
            <BR>

            <LI>
            Wait for MBS to get ready (see <A
             HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_Configure_Log.gif">terminal output</A>) 
            <LI>
            Press <B>Start </B>to start acquisition <BR>
            <BR>
            <IMG SRC="http://www.bl.physik.uni-muenchen.de/marabou/html/pics/C_analyze_Start.gif" SGI_SRC_INVALID BORDER="3"><BR>
            <BR>

        </UL>
        <LI>
        Start the &quot;<A
         HREF="http://www.bl.physik.uni-muenchen.de/marabou/html/hpr/HistPresent.gif">Histogram 
        Presenter</A>&quot; in a second window: 
        <UL>
            <LI>
            Link memory-mapped file to your local directory:<BR>
             <B>ln -s /tmp/M_prod_<I>mygroup</I>.map . </B>(once only) 
            <LI>
            <B>HistPresent </B>- this will give you access to the 
            active histograms (map file) as well as to previously stored root files <BR>
             
        </UL>
    </UL>
    <LI>
    How to change hardware (=CAMAC) configuration 
    <UL>
        <LI>
        Edit config file <B><I>Xxx</I>Config.C </B>according to your 
        needs<BR>
         (be sure that <B>Overwrite </B>is enabled for 
        MakeReadoutCode() <B>but not</B> for MakeAnalyzeCode()) 
        <LI>
        Recompile it using ROOT: <B><I>Xxx</I>Config.C</B> <BR>
         this will generate a new version of <B><I>Xxx</I>Readout.c</B> 
        <LI>
        Recompile<B><I> Xxx</I>Readout.c</B> with <B>MBS Control -&gt; 
        Compile readout function</B> 
        <LI>
        Restart MBS: press <B>Clear MBS</B>, then <B>Configure</B>, 
        then <B>Start</B> 
    </UL>
</OL>
<P>
<I>(<A HREF="mailto:Garching.Data.Acquisition@Physik.Uni-Muenchen.DE">MARaBOU</A>, 
Last Update 29-Mar-2000, R. Lutter) </I></P>
</BODY>
</HTML>
