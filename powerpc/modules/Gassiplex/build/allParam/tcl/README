Author:  Benjamin Sailer
         TUM/E12
         Benjamin.Sailer@ph.tum.de
Version: 0.2
Date:    2001-04-02

libtclParam.a
=============

Content
-------

1. Compiletime requirements
2. Linktime requirments
3. Runtime requirments
4. Known bugs and further developement perspectives

1. Compiletime requirements
---------------------------

  At compiletime the only requirement for libtclParam.a is tcl.h, which should
be available on most UNIX systems in the default include path.

2. Linktime requirments
-----------------------

  The library needs libtcl.a (or libtcl.so), which is normally located in the
defaut library path ('/usr/lib'). Anyhow, on some systems (like GSI Linux
cluster) there is no link from the actual version of the tcl library (somthing
like libtcl8.0.so) set to libtcl.so which forces you to change the Makefile in
that respect. Additionally sometimes there seems to be no static library but
only a shared object - which must not, but can, cause trouble if required other
libraries are not available (such as libm.a or libdl.a).

3. Runtime requirments
----------------------

  At runtime a file is opened containing data in a tcl-shaped way (arrays are
sets of parameters with a succeeding array index number in the tcl idx). When
calling the constructor conParam(), the library looks for the enviroment
variables DAQSLOW_PARAM_FILE and DAQSLOW_STORAGE_FILE. If set, these files
are used to read respectively write back parameters. The default values for
these filenames are 'param.tcl' and 'storage.tcl'. The first file has to exist
and contain tcl-shaped lines to set variables or comments. The tcl-interpreter
called checks the validity of the tcl-file and then reads in all the variables.
Therefore and valid tcl-construct, e.g. the use of the array containing the
enviroment, can be used. However for compatibility to libfileParam.a it is not
recommended to take advanage of these possibilities.
  If using conSetupParam() instead, the character string given to the
constructor is used to define the setup. The files are named
<setup>_p.tcl respectively <setup>_s.tcl. If 'NULL' is given to the
constructor, "default" is used as the setup name.
  Param_getBlob() simply opens a FILE-stream and therefore uses the path given
by a Param_getFilename()-call, so the tcl-source has to contain a variable with
a correct path as a value.

4. Known bugs and further developement perspectives
---------------------------------------------------

  In the tcl file, arrays are only recognized up to the size where the first
sequence number is missing (this is due to performance reasons). For example
card0(threshold0) 7
card0(threshold1) 4
card0(threshold2) 6
card0(threshold3) 7
card0(threshold4) 9
card0(threshold6) 8
card0(threshold7) 6
card0(threshold8) 7
will only return the first 4 threshold values, if requested via
Param_getIntArray(param, "card0", "threshold", 8, &rows, value);
In this respect, libtclParam.a (and also libfileParam.a) have a different
behaviour than the database oriented param sources (that return all values,
while the index of the single value is lost). Both behaviors are not the best
ways and will hopefully be canged to a third one, in which a placeholder value
is sent for all missing values. As in all READMEs, my request to you is:

Please send additional bug reports to

Benjamin.Sailer@ph.tum.de

