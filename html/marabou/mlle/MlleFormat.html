<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
    <!-- SGI_COMMENT COSMOCREATE -->
    <!-- SGI_COMMENT VERSION NUMBER="1.0.2" -->
</HEAD>
<BODY>
<H2>
MLLE's Data Formats</H2>
<UL>
    <LI>
    <A HREF="#FileHeader">File Header </A>
    <UL>
        <LI>
        <A HREF="#SuperHeader">SuperHeader</A> 
        <LI>
        <A HREF="#SystemHeader">System/User Header</A> 
        <LI>
        <A HREF="#RawDataHeaderData">System Header: Raw data</A> 
        <LI>
        <A HREF="#HistogramHeaderData">System Header: Histograms</A> 
    </UL>
    <LI>
    <A HREF="#RawDataRecord">Raw Data Record </A>
    <UL>
        <LI>
        <A HREF="#RecordHeader">Record Header</A> 
        <LI>
        <A HREF="#EventF0">Event Formats</A> 
        <UL>
            <LI>
            <A HREF="#EventF0">F0</A> 
            <LI>
            <A HREF="#EventF0t">F0t </A>
            <LI>
            <A HREF="#EventF0m">F0m</A> 
            <LI>
            <A HREF="#EventF1">F1</A> 
            <LI>
            <A HREF="#EventF2">F2</A> 
        </UL>
    </UL>
    <LI>
    <A HREF="#HistogramData">Histogram Data</A> 
</UL>
<HR>
<P>
</P>
<UL>
    <LI>
    <A NAME="FileHeader"><B><FONT SIZE="4">File Header</FONT></B></A> 
    <UL>
        <LI>
        Record #1 of a file on tape 
        <LI>
        Size 384 bytes on tape, 364 bytes when written to disk (strange!) 
        <LI>
        Consists of 
        <UL>
            <LI>
            a super header 
            <LI>
            a system header 
            <LI>
            an optional user header 
            <LI>
            data sections for system and user headers, resp. 
        </UL>
        <LI>
        Format defined by 
        <UL>
            <LI>
            C header file <B>/home/rg/host/include/typedefs/hdr.h </B>
            <LI>
            header description files <B>/home/rg/host/etc/syshdr/*.hdr</B>
             
        </UL>
        <P>
        <BR>
         </P>
        <LI>
        <A NAME="SuperHeader"><B><FONT SIZE="4">SuperHeader</FONT></B></A>
         
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B> </TD>
                <TD><B>Element</B> </TD>
                <TD><B>Type</B> </TD>
                <TD><B>Size</B> </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">0 </TD>
                <TD>Header ID word </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">4 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">4 </TD>
                <TD>Offset to system header </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">8 </TD>
                <TD>Offset to user header </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">12 </TD>
                <TD>Offset to real data <FONT SIZE="1">(*)</FONT></TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
        </TABLE>
        <P>
        <FONT SIZE="2">(*) Start of data in case of a histogram</FONT><BR>
         </P>
        <P>
        </P>
        <LI>
        <A NAME="SystemHeader"><B><FONT SIZE="4">System/User Header</FONT></B></A>
         
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B> </TD>
                <TD><B>Element</B> </TD>
                <TD><B>Type</B> </TD>
                <TD><B>Size</B> </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0 </TD>
                <TD>Number of entries </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+4 </TD>
                <TD>Name of header description file </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">16 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+20 </TD>
                <TD>Array of offsets to system/user data </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">N </TD>
            </TR>
        </TABLE>
        <P>
        <BR>
         </P>
        <LI>
        <A NAME="RawDataHeaderData"><B><FONT SIZE="4">System Header Data</FONT></B></A><BR>
         <B><FONT SIZE="4">Raw Data, ID=&quot;MLRD&quot; </FONT></B><BR>
         <FONT SIZE="2">(defined by header description file <B>rawdat.hdr</B>)</FONT>
         
        <TABLE BORDER="1">
            <TR>
                <TD><B><FONT SIZE="3">Byte</FONT></B> </TD>
                <TD><B>Element</B> </TD>
                <TD><B>Type</B> </TD>
                <TD><B>Size</B> </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0 </TD>
                <TD>User name </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">20 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+20 </TD>
                <TD>Group name </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">20 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+40 </TD>
                <TD>Experiment </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">80 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+120 </TD>
                <TD>Run ID </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">20 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+140 </TD>
                <TD>Tape ID </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">20 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+160 </TD>
                <TD>Filename </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+172 </TD>
                <TD>Program </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+184 </TD>
                <TD>Comments </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">80 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+264 </TD>
                <TD>Creation date </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+276 </TD>
                <TD>Creation time </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
        </TABLE>
        <P>
        </P>
        <LI>
        <A NAME="HistogramHeaderData"><B><FONT SIZE="4">System Header 
        Data</FONT></B></A><BR>
         <B><FONT SIZE="4">Histograms, ID=&quot;MLSP&quot;</FONT></B><BR>
         <FONT SIZE="2">(defined by header description file <B>spec2.hdr</B>)</FONT>
         
        <TABLE BORDER="1">
            <TR>
                <TD><B><FONT SIZE="3">Byte</FONT></B> </TD>
                <TD><B><FONT SIZE="3">Element</FONT></B> </TD>
                <TD><B><FONT SIZE="3">Type</FONT></B> </TD>
                <TD><B><FONT SIZE="3">Size</FONT></B> </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0 </TD>
                <TD>Spectrum name </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+12 </TD>
                <TD>User name </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">20 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+32 </TD>
                <TD>Group name </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">20 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+52 </TD>
                <TD>Experiment </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">80 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+132 </TD>
                <TD>Comments </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">80 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+212 </TD>
                <TD>Creation date </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+224 </TD>
                <TD>Creation time </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+236 </TD>
                <TD>Number of dimensions </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+240 </TD>
                <TD>Bytes per channel </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+244 </TD>
                <TD>Size of spectrum (bytes) </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+248 </TD>
                <TD>Event parameter dim 1 </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+252 </TD>
                <TD>Lower limit dim 1 </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+256 </TD>
                <TD>Upper limit dim 1 </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+260 </TD>
                <TD>BinSize dim 1 </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+264 </TD>
                <TD>Number of channels dim 1 </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">1 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+268 </TD>
                <TD>... same for dimension 2 </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">5 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+288 </TD>
                <TD>... same for dimension 3 </TD>
                <TD>unsigned long </TD>
                <TD ALIGN="RIGHT">5 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+308 </TD>
                <TD>Name of event parameter 1 </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+320 </TD>
                <TD>Name of event parameter 2 </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+332 </TD>
                <TD>Name of event parameter 3 </TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">12 </TD>
            </TR>
        </TABLE>
        <P>
        <BR>
         </P>
    </UL>
    <LI>
    <A NAME="RawDataRecord"><B><FONT SIZE="4">Raw Data Record</FONT></B></A>
     
    <UL>
        <LI>
        Size 10240 bytes (hex 0x2800) 
        <LI>
        Consists of 
        <UL>
            <LI>
            a record header 
            <LI>
            event data 
        </UL>
        <LI>
        Format defined by 
        <UL>
            <LI>
            C header file <B>/home/rg/tasks/include/raw/raw_data.h </B>
            <LI>
            C header file <B>/home/rg/aiac/include/aiacevents.h </B>
        </UL>
        <P>
        <BR>
         </P>
        <LI>
        <A NAME="RecordHeader"><B><FONT SIZE="4">Record Header</FONT></B></A>
         
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B></TD>
                <TD><B>Element</B></TD>
                <TD><B>Type</B></TD>
                <TD><B>Size</B></TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">0</TD>
                <TD>Record ID, hex 0xFFF8</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">2</TD>
                <TD>Record type</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">6</TD>
                <TD>Event type</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">10</TD>
                <TD>Number of event parameters</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">14</TD>
                <TD>Header length (bytes)</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">18</TD>
                <TD>Record length (bytes)</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">22</TD>
                <TD>Record number of tape</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">26</TD>
                <TD>Record number within file</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">30</TD>
                <TD>File number on tape</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">34</TD>
                <TD>Creation time (unused)</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">38</TD>
                <TD>Word count (= number of data words)</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">42</TD>
                <TD>(not used)</TD>
                <TD>char </TD>
                <TD ALIGN="RIGHT">28</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">70</TD>
                <TD>Start of event data</TD>
                <TD>short </TD>
                <TD ALIGN="RIGHT">N</TD>
            </TR>
        </TABLE>
        <P>
        </P>
        <LI>
        <A NAME="EventF0"><B><FONT SIZE="4">Event Data F0, zero-padded 
        vector</FONT></B></A> 
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B></TD>
                <TD><B>Element</B></TD>
                <TD><B>Type</B></TD>
                <TD><B>Size</B></TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0</TD>
                <TD>Event ID, hex 0xFF00</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+2</TD>
                <TD>Word count (including ID + wc)</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+4</TD>
                <TD>Start of data</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">wc - 2</TD>
            </TR>
        </TABLE>
        <P>
        </P>
        <LI>
        <A NAME="EventF0t"><B><FONT SIZE="4">Event Data F0t, same as 
        F0, including time stamp</FONT></B></A> 
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B></TD>
                <TD><B>Element</B></TD>
                <TD><B>Type</B></TD>
                <TD><B>Size</B></TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0</TD>
                <TD>Event ID, hex 0xFF00</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+2</TD>
                <TD>Word count (including ID + wc)</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+4</TD>
                <TD>Time stamp</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+8</TD>
                <TD>Start of data</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">wc - 4</TD>
            </TR>
        </TABLE>
        <P>
        </P>
        <LI>
        <A NAME="EventF0m"><B><FONT SIZE="4">Event Data F0m, 
        multiscaling</FONT></B></A> 
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B></TD>
                <TD><B>Element</B></TD>
                <TD><B>Type</B></TD>
                <TD><B>Size</B></TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0</TD>
                <TD>Event ID, hex 0xFF00</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+2</TD>
                <TD>Word count (including ID + wc)</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+4</TD>
                <TD>Multiscaling address</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+8</TD>
                <TD>Start of data</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">wc - 4</TD>
            </TR>
        </TABLE>
        <P>
        </P>
        <LI>
        <A NAME="EventF1"><B><FONT SIZE="4">Event Data F1</FONT></B></A><B><FONT
         SIZE="4">, zeroes suppressed, pattern driven, up to 16 params</FONT></B>
         
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B></TD>
                <TD><B>Element</B></TD>
                <TD><B>Type</B></TD>
                <TD><B>Size</B></TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0</TD>
                <TD>Event ID, hex 0xFF01</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+2</TD>
                <TD>Word count (including ID + wc)</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+4</TD>
                <TD>Pattern word, 16 bits</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+6</TD>
                <TD>Start of data</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">wc - 3</TD>
            </TR>
        </TABLE>
        <P>
        </P>
        <LI>
        <A NAME="EventF2"><B><FONT SIZE="4">Event Data F2</FONT></B></A><B><FONT
         SIZE="4">, zeroes suppressed, pattern driven, up to 32 params</FONT></B>
         
        <TABLE BORDER="1">
            <TR>
                <TD><B>Byte</B></TD>
                <TD><B>Element</B></TD>
                <TD><B>Type</B></TD>
                <TD><B>Size</B></TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+0</TD>
                <TD>Event ID, hex 0xFF02</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+2</TD>
                <TD>Word count (including ID + wc)</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+4</TD>
                <TD>Pattern word, 32 bits</TD>
                <TD>unsigned long</TD>
                <TD ALIGN="RIGHT">1</TD>
            </TR>
            <TR>
                <TD ALIGN="RIGHT">+8</TD>
                <TD>Start of data</TD>
                <TD>unsigned short</TD>
                <TD ALIGN="RIGHT">wc - 4</TD>
            </TR>
        </TABLE>
        <P>
        <BR>
         </P>
    </UL>
    <LI>
    <A NAME="HistogramData"><B><FONT SIZE="4">Histogram Data</FONT></B> </A>
    <UL>
        <LI>
        Immediately following after header data (pointed to by <B>offset 
        to real data</B>)
        <LI>
        Binary data depending on value of <B>bytes-per-channel</B> 
        <LI>
        Fortran-like storage in case of two-dimensional data (x,y): data(1,1) 
        .. data(2,1) ... 
    </UL>
</UL>
</BODY>
</HTML>
