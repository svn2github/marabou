<!DOCTYPE HTML>
<HTML>
<style type="text/css">
  body { margin-left: +10%; margin-right: +10%; }
</style>
<link type="text/css" rel="stylesheet" href="style.css">
<TITLE>How to calibrate a 1-dim histogram</TITLE>
<axx NAME=Help_on_Calibration></a>
<H3>Calibrate x-scale of 1-dim histogram</H3>
The X-scale of of a 1-dim histogram may be recalibrated
providing x-y-points. 

There are two methods implemented:
<ul>
<li>
   Only the X-scale of the histogram is changed in situ,
   no rebinning is done, only the linear part of the calibration 
   function is used.
</li>
<li> 
   A new histogram with user defined binning is generated
   In this case the xvalues of the original are randomly
   shifted within a bin to avoid binning effects.
   Caveat: The width of (narrow) peaks will in general be 
   increased by this.
</li>
</ul>
To calibrate obviously at least 2 points are required. 
Points can be provided in the following ways:<br>
Activate the option <b>Enable calibration</b> from the 
<b>Various HistPresent Options</b> menu.<br> 
Execute a (gauss) fit to at least 2 peaks in the spectrum 
from the <b>Fit popup menu</b>.<br> 
Execute <b>Calibrate</b> from the same menu and fill in values
into the presented table.<br> 
If no or less then 2 points are added before <b>Calibrate</b>
the x-y values of the fit points must be filled in by hand.
<p>
The user is then prompted for a fit function. As default 
<b>pol1</b> is offered, i.e. a straight line. Giving <b>pol2</b>
would give a polynomial of 2nd degree.
The fitted function may be written to a root file for later
use in an analysis program. The name of the fit function which
is used to retrieve the calibration function is the histgram name
appended by <i>_calfunc</i>.
<p>
The calibration values and titles of the x and y axis are 
stored in an ascii-file which name is formed from the resource
<b>HistPresent.LastSettingsName</b> in the <b>.rootrc</b> followed by 
_<i>histname</i>.def
So normally: if the histogram name is <i>hpx</i> the file is named:
<i>defaults/Last_hpx.def</i>
The same calibration might be applied to different histograms 
by just copying this file and replacing the name of the histogram.
<p>
This can also be done by selecting this histogram and the one
to which the calibration should be applied and display them 
in one canvas. In this canvas a popup menu is provided to 
achieve this. See <a href=#Help_on_EnableCalib>Help_on_EnableCalibration</a> 
<p>
See also <a href=showlists.html#Help_on_ShowSelected>Help_on_ShowSelected</a> and
<a href=options.html#Help_on_RememberLastSettings>Help_on_RememberLastSettings</a>

<a NAME=Help_on_EnableCalib></a>
<H3>Option: Enable calibration</H3>
This option can be set in the <b>Various HistPresent Options</b> menu.
The X - scale of of a 1-dim histogram may be recalibrated
providing (more than 1) x-y-points. If this option is active
the user is asked after a fit to a peak if the mean value 
should be added to the list of calibration points.
See also <a href=calibration.html>Help_on_Calibration</a>
</HTML>
